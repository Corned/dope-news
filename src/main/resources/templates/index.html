<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <div th:replace="fragments/head">...</div>

    <body>
        <div th:replace="fragments/navigation">...</div>
    </body>

    <center>
                    
        <ul>
            <li th:each="n : ${news}">
                <div class="card">
                    <h1><span th:text="${n.otsikko}">...</span></h1>
                    <div class="image-container">
                        <img class="image" th:src="@{${'/image/' + n.kuva.id}}"/>
                    </div>

                    <!-- Container for categories -->
                    <div>
                        <span class="category-pill" th:each="c : ${n.kategoriat}" th:text="${c.kategoria}">...</span>
                    </div>
        
                    <h3>
                        <span th:text="${n.ingressi}">...</span>
                    </h3>

                    <a class="btn" th:href="@{${'/article/' + n.id}}">Lue lisää!</a>
                </div>
            </li>
        </ul>
        
    </center>


    <div th:replace="fragments/scripts">...</div>
    
    <script th:inline="javascript">
        /*<![CDATA[*/
        $(document).ready(function() {
            $(".writer-multi-input").on("input", function() {
                var text = this.value.trim();
                var keywords = text.split(",");
    
                if (keywords.length > 1) {
                    this.value = keywords[keywords.length - 1];
                    for (var i = 0; i < keywords.length - 1; i++) {
                        var keyword = keywords[i].trim();
                        if ( keyword.length > 0) {
                            $(".added-writers").append("<div class=\"added-item\">"
                                +  keyword
                            + "</div>");
                            $(".added-writers").append(`<input type="hidden" name="kirjoittajat" value="${keyword}"/>`);
                        }
                    }
                }
            });
        });
        /*]]>*/
    </script>
</html>